# Money Hub App - Environment Variables Template
# Copy this file to .env.local and fill in your actual API credentials

# ==========================================================================
# STOCK PRICE PROVIDERS  (multi-provider waterfall — /api/stock-prices)
# ==========================================================================
# OmniFolio uses a resilient waterfall:
#   Yahoo Finance v8 (free, unofficial) → Finnhub → Alpha Vantage → Upstash Redis stale → hardcoded fallback
#
# Yahoo Finance is tried first — NO key needed.
# Set the keys below to unlock additional fallback providers.

# ── Finnhub (RECOMMENDED) ──
# FREE tier: 60 API calls/min  — plenty for portfolios up to 60 symbols/min
# Sign up FREE: https://finnhub.io
# Used when Yahoo Finance is unavailable (circuit breaker open)
FINNHUB_API_KEY=

# ── Alpha Vantage (BACKUP) ──
# FREE tier: 25 API calls/day  — last-resort only, not used for batch requests
# Sign up FREE: https://www.alphavantage.co/support/#api-key
ALPHAVANTAGE_API_KEY=

# ── Upstash Redis (STRONGLY RECOMMENDED for production / scale) ──
# Caches stock prices for 5 minutes and stale prices for 24h.
# Shared across ALL serverless instances — prevents thundering-herd on cold starts.
# FREE tier: 10,000 req/day  https://upstash.com
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=

# ==========================================================================
# BINANCE API CREDENTIALS
# ==========================================================================
# Get your API keys from: https://www.binance.com/en/my/settings/api-management
# IMPORTANT: Never commit your actual API keys to version control
# Enable "Enable Spot & Margin Trading" for trading functionality

# Binance API Key (required for authenticated endpoints)
BINANCE_API_KEY=your_binance_api_key_here

# Binance API Secret (required for authenticated endpoints)
BINANCE_API_SECRET=your_binance_api_secret_here

# Binance Endpoint (optional, defaults to spot)
# Options: 'spot', 'spot-testnet', 'futures-usdt', 'futures-coin'
BINANCE_ENDPOINT=spot

# ==========================================================================
# REVOLUT API CREDENTIALS
# ==========================================================================
# Get your API credentials from: https://business.revolut.com/settings/api
# Revolut uses OAuth 2.0 for authentication in production
# For sandbox testing, use JWT token

# Revolut Environment (production or sandbox)
REVOLUT_ENVIRONMENT=sandbox

# Production OAuth Credentials
REVOLUT_CLIENT_ID=your_revolut_client_id_here
REVOLUT_CLIENT_SECRET=your_revolut_client_secret_here

# OR Sandbox JWT Token (for testing)
REVOLUT_JWT_TOKEN=your_revolut_jwt_token_here

# Revolut Access Token (obtained via OAuth flow)
REVOLUT_ACCESS_TOKEN=your_revolut_access_token_here

# Revolut Refresh Token (obtained via OAuth flow)
REVOLUT_REFRESH_TOKEN=your_revolut_refresh_token_here

# ==========================================================================
# VANTAGE MARKETS API CREDENTIALS
# ==========================================================================
# Get your API credentials from your Vantage account dashboard
# Note: Vantage may use MetaTrader 4/5 API - adjust based on actual API

# Vantage Environment (live or demo)
VANTAGE_ENVIRONMENT=demo

# Vantage API Key
VANTAGE_API_KEY=your_vantage_api_key_here

# Vantage Account ID
VANTAGE_ACCOUNT_ID=your_vantage_account_id_here

# Vantage API Secret (if required)
VANTAGE_API_SECRET=your_vantage_api_secret_here

# Vantage Access Token (if using OAuth)
VANTAGE_ACCESS_TOKEN=your_vantage_access_token_here

# ==========================================================================
# ENCRYPTION (server-side AES-256-GCM)
# ==========================================================================
# ENCRYPTION_KEY must be a high-entropy string — do NOT reuse BETTER_AUTH_SECRET.
# Generate one with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# Key rotation (zero-downtime):
#   1. Set ENCRYPTION_KEY_PREVIOUS = current ENCRYPTION_KEY value
#   2. Set ENCRYPTION_KEY = new key value
#   3. Deploy. New writes use the new key; old ciphertext (v0:...) still decrypts.
#   4. Run a migration job to re-encrypt all rows to the new key.
#   5. Remove ENCRYPTION_KEY_PREVIOUS once all rows are migrated.

ENCRYPTION_KEY=          # required in production — generate a 64-char hex string
ENCRYPTION_KEY_PREVIOUS= # only needed during key-rotation window

# ==========================================================================
# EMAIL (Resend — https://resend.com)
# ==========================================================================
# RESEND_API_KEY: create a free account at https://resend.com, then:
#   1. Add omnifolio.app as a verified domain (Domains → Add Domain)
#   2. Add the SPF, DKIM, and DMARC DNS records Resend gives you
#   3. Create an API key with "Send emails" permission
#
# FROM_EMAIL (optional): defaults to "OmniFolio <noreply@omnifolio.app>"
# The domain MUST be verified in Resend before you can send from it.

RESEND_API_KEY=          # re_xxxxxxxxxxxx
FROM_EMAIL=              # e.g. OmniFolio <noreply@omnifolio.app>



# Supabase (Database)
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url_here
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key_here

# Better Auth
BETTER_AUTH_SECRET=your_better_auth_secret_here
BETTER_AUTH_URL=http://localhost:3000

# Google OAuth
GOOGLE_CLIENT_ID=your_google_client_id_here
GOOGLE_CLIENT_SECRET=your_google_client_secret_here

# Google Gemini AI
GEMINI_API_KEY=your_gemini_api_key_here

# ==========================================================================
# SEC EDGAR API CONFIGURATION
# ==========================================================================
# SEC EDGAR is a FREE public API - no API key required!
# However, SEC requires a proper User-Agent header with contact info
# Format: "CompanyName AdminEmail" (e.g., "MyApp admin@myapp.com")
# SEC Rate Limit: ~10 requests/second (we use 8 for safety margin)

# Required: Your application name and contact email for SEC compliance
SEC_USER_AGENT=OmniFolio admin@omnifolio.app

# SEC Watcher Configuration (optional)
# Poll interval in milliseconds (default: 60000 = 1 minute)
SEC_POLL_INTERVAL=60000

# Maximum filings to process per poll cycle (default: 50)
SEC_MAX_FILINGS_PER_POLL=50

# Enable webhook notifications for new filings (optional)
SEC_WEBHOOK_ENABLED=false
SEC_WEBHOOK_URL=

# ==========================================================================
# TWITTER/X API CREDENTIALS
# ==========================================================================
# Get your API keys from: https://developer.twitter.com/en/portal/dashboard
# Twitter API is used to fetch tweets from specific accounts
# The Twitter Feed tab displays filtered tweets about politics, geopolitics, and finance

# Twitter API Key (Consumer Key)
TWITTER_API_KEY=your_twitter_api_key_here

# Twitter API Secret (Consumer Secret)
TWITTER_API_SECRET=your_twitter_api_secret_here

# ==========================================================================
# SECURITY NOTES
# ==========================================================================
# 1. NEVER commit .env.local to version control
# 2. Use different API keys for development and production
# 3. Enable IP whitelisting on exchange/broker platforms when possible
# 4. Use read-only API keys for viewing data, trading keys only when necessary
# 5. Enable 2FA on all exchange/broker accounts
# 6. Regularly rotate API keys
# 7. Monitor API usage and set up alerts for suspicious activity
# 8. Store production credentials in secure environment variable services
#    (Vercel Environment Variables, AWS Secrets Manager, etc.)

# ==========================================================================
# API KEY PERMISSIONS
# ==========================================================================

# Binance Recommended Permissions:
# ✓ Enable Reading
# ✓ Enable Spot & Margin Trading (if you want to trade)
# ✗ Enable Withdrawals (NOT recommended for security)
# ✓ Restrict access to trusted IPs only

# Revolut Recommended Scopes:
# - READ: accounts, counterparties, transactions, cards
# - WRITE: payments, transfers (if needed)

# Vantage Recommended Permissions:
# - Read account information
# - Read positions and orders
# - Place and modify orders (if trading)
# - Close positions (if trading)

# ==========================================================================
# RATE LIMITS
# ==========================================================================
# Be aware of API rate limits:
# - Binance: 1200 requests/minute for general endpoints
# - Revolut: Varies by endpoint (check documentation)
# - Vantage: Check with your broker for specific limits

# ==========================================================================
# WEBHOOK ENDPOINTS (Optional - for real-time updates)
# ==========================================================================
# BINANCE_WEBHOOK_SECRET=your_binance_webhook_secret_here
# REVOLUT_WEBHOOK_SECRET=your_revolut_webhook_secret_here
# VANTAGE_WEBHOOK_SECRET=your_vantage_webhook_secret_here
